[
  {
    "path": "posts/project-04/",
    "title": "Bootstrapping",
    "description": "Using bootstrapping to find confidence interval.",
    "author": [
      {
        "name": "Laurel Abowd",
        "url": {}
      }
    ],
    "date": "2021-03-14",
    "categories": [],
    "contents": "\r\nIntroduction\r\nThis analysis uses bootstrapping to create a 95% confidence interval for the percentage of University of California Santa Barbara (UCSB) community members identifying as nonbinary/genderqueer that have personally experienced, “exclusionary, offensive, hostile or intimidating conduct.” Data is from the 2014 UCSB Campus Climate Project survey.\r\nBuild dataset\r\n22 of 36 UCSB community members (61%) identifying as nonbinary/genderqueer responded that they had personally experienced, “exclusionary, offensive, hostile or intimidating conduct”\r\n\r\n\r\nhide\r\n\r\n# Create vector to relect this data\r\nsurvey_data <- vector(length = 36)\r\nvalues <- c(0, 1)\r\n\r\nsurvey_data[1:22] <- unique(values)[2]\r\nsurvey_data[23:36] <- unique(values)[1]\r\n\r\n# 1 = experienced intimidating conduct\r\n# 0 = did not experience intimidating conduct\r\n\r\n\r\n\r\nBuild function\r\n\r\n\r\nhide\r\n\r\n# Function of proportion of sample that experienced intimidating conduct\r\nprop_fun <- function (x,i) {sum(x[i])/length(x[i])}\r\n\r\n\r\n\r\nBootstrap 10,000 samples\r\n\r\n\r\nhide\r\n\r\nsurvey_data_10k <- boot(survey_data,\r\n                        statistic = prop_fun, \r\n                        R = 10000)\r\n\r\n# survey_data_10k\r\n\r\n# survey_data_10k$t\r\n\r\n\r\n\r\nPlot data\r\n\r\n\r\nhide\r\n\r\n# Create dataframe\r\nsurvey_data_10k_df <- data.frame(bs_prop = survey_data_10k$t)\r\n\r\n# Histogram\r\nggplot(data = survey_data_10k_df, aes(x = bs_prop)) +\r\n  geom_histogram(bins = 22, fill = \"#275070\") +\r\n  theme_minimal() +\r\n  labs(y = \"Count\",\r\n       x = \"Proportion\",\r\n       title = \"Bootstraped Survey Data: n = 10,000\")\r\n\r\n\r\n\r\n\r\nConfidence interval\r\n\r\n\r\nhide\r\n\r\nboot.ci(survey_data_10k, conf = 0.95, type = \"perc\")\r\n\r\n\r\nBOOTSTRAP CONFIDENCE INTERVAL CALCULATIONS\r\nBased on 10000 bootstrap replicates\r\n\r\nCALL : \r\nboot.ci(boot.out = survey_data_10k, conf = 0.95, type = \"perc\")\r\n\r\nIntervals : \r\nLevel     Percentile     \r\n95%   ( 0.4444,  0.7778 )  \r\nCalculations and Intervals on Original Scale\r\n\r\nIn the 2014 UCSB Campus Climate Project Final Report, 22 of the 36 of surveyed UCSB community members identifying as nonbinary/genderqueer responded that they had personally experienced, “exculsionary, offensive, hostile or intimidating conduct,” or a proportion of 0.61 (n = 36), with a bootstrapped 95% confidence interval of [0.44, 0.78] (n = 10,000 bootstrap samples).\r\nData available at:\r\nhttps://campusclimate.ucop.edu/_common/files/pdf-climate/ucsb-full-report.pdf\r\n\r\n\r\n\r\n",
    "preview": "posts/project-04/abowd_laurel_a4_task3_files/figure-html5/unnamed-chunk-4-1.png",
    "last_modified": "2021-03-14T13:33:44-07:00",
    "input_file": "abowd_laurel_a4_task3.utf8.md"
  },
  {
    "path": "posts/project-03/",
    "title": "Text Analysis: The Alchemist by Paulo Coelho",
    "description": "Using text analysis to assess book sentiment.",
    "author": [
      {
        "name": "Laurel Abowd",
        "url": {}
      }
    ],
    "date": "2021-03-13",
    "categories": [],
    "contents": "\r\nIntroduction\r\n\r\n\r\nhide\r\n\r\n# read in the data\r\nalchemist <- pdf_text(here(\"data\", \"project-03\", \"the_alchemist_coelho.pdf\"))\r\n\r\n\r\n\r\nThe Alchemist chronicles the fable of Santiago, a shepherd boy who travels through the desert to find treasure and fulfill his personal destiny. The journey takes unexpected turns along the way. The book is broken into three parts: Part One, Part Two, and the Epilogue.\r\nCitation:\r\nCoelho, Paulo. The Alchemist. Translated by Alan R. Clarke. Published 1992. ISBN 0-7225-3293-8. Retrieved from books-library.online here: https://books-library.online/files/books-library.online-12230111Ib9C3.pdf\r\n\r\n\r\nhide\r\n\r\n# Get text in data frame and tidy format\r\n\r\nalchemist_tidy <- data.frame(alchemist) %>% \r\n  mutate(text_full = str_split(alchemist, pattern = '\\\\n')) %>% \r\n  unnest(text_full) %>% \r\n  mutate(text_full = str_trim(text_full)) \r\n\r\n\r\n\r\nData Wrangling\r\n\r\n\r\nhide\r\n\r\n# Remove introductory text and assign part 1, part 2, or epilogue to the text_full column\r\nalchemist_df <- alchemist_tidy %>% \r\n  slice(-(1:7)) %>% \r\n  mutate(part = case_when(\r\n    str_detect(text_full, \"PART\") ~ text_full,\r\n    str_detect(text_full, \"EPILOGUE\") ~ text_full,\r\n    TRUE ~ NA_character_\r\n  )) %>% \r\n  fill(part) %>% \r\n  mutate(part = str_to_lower(part))\r\n\r\n\r\n\r\n\r\n\r\nhide\r\n\r\n# Get word counts by part\r\n\r\nalchemist_tokens <- alchemist_df %>% \r\n  unnest_tokens(word, text_full) %>% \r\n  select(part, word)\r\n\r\nalchemist_wordcount <- alchemist_tokens %>% \r\n  count(part, word)\r\n\r\n# Remove stop words\r\n\r\nalchemist_nonstop_words <- alchemist_tokens %>% \r\n  anti_join(stop_words) \r\n\r\n# \"boy\" appears frequently, but it is what the author uses to refer to the main character, Santiago.\r\n# Include \"boy\" in the stop words\r\n\r\nnon_stop_counts <- alchemist_nonstop_words %>% \r\n  count(part, word) %>% \r\n  filter(word != \"boy\")\r\n\r\n\r\n\r\nWord Count Analysis\r\n\r\n\r\nhide\r\n\r\n# Find the top 5 words from each part\r\n\r\ntop_5_words <- non_stop_counts %>% \r\n  group_by(part) %>% \r\n  arrange(-n) %>% \r\n  slice(1:5)\r\n\r\n# Reorder parts so that they occur in chronological order instead of alphabetical\r\n\r\ntop_5_words_chrn <- top_5_words %>% \r\n  mutate( part = factor(part,\r\n         levels = c(\"part one\", \"part two\", \"epilogue\"))) \r\n\r\n\r\n\r\n\r\n\r\nhide\r\n\r\n# Make graph\r\nggplot(data = top_5_words_chrn, aes(x = word, y =n)) +\r\n  geom_col(fill = \"gold\") +\r\n  facet_wrap(~part, scales = \"free\") +\r\n  coord_flip() +\r\n  labs(y = \"word count\",\r\n       title = \"The Alchemist top 5 words by part\") +\r\n  theme_grey()\r\n\r\n\r\n\r\n\r\nFigure 1. Top five non-stop words in each part of The Alchemist\r\nThese top five words reflect the story arc of The Alchemist. In Part One, Santiago is with his flock of sheep and dreams of treasure and a journey. In Part Two, Santiago travels through the desert and eventually meets the alchemist. Finally, in the epilogue, there is resolution of Santiago’s personal destiny.\r\nNRC Sentiment Analysis\r\n\r\n\r\nhide\r\n\r\n# Sentiment analysis \r\n\r\nnrc <- get_sentiments(lexicon = \"nrc\")\r\n\r\nalchemist_nrc <- alchemist_nonstop_words %>% \r\n  filter(word != \"boy\") %>%\r\n  inner_join(nrc)\r\n\r\nalchemist_nrc_counts <- alchemist_nrc %>% \r\n  count(part, sentiment)\r\n\r\n# Get percentages of sentiments\r\nalchemist_nrc_percent <- alchemist_nrc_counts %>% \r\n  group_by(part) %>% \r\n  mutate(percent = round((n/sum(n))*100, 2)) %>% \r\n  mutate( part = factor(part,\r\n                        levels = c(\"part one\", \"part two\", \"epilogue\"))) \r\n\r\n\r\n\r\n\r\n\r\nhide\r\n\r\n# graph sentiments for the three parts\r\n\r\nggplot(data = alchemist_nrc_percent, aes(x = sentiment, y = percent)) +\r\n  geom_col(fill = \"gold\") +\r\n  facet_wrap(~part, scales = \"free\") +\r\n  coord_flip() +\r\n  labs(y = \"percent occurrence\",\r\n       title = \"The Alchemist NRC sentiment analysis by part\") +\r\n  theme_grey()\r\n\r\n\r\n\r\n\r\nFigure 2. Percent occurrence of the NRC lexicon emotions in the three parts of The Alchemist\r\nThe Alchemist is an inspirational book that many people turn to during crossroads in their lives. Unsurprisingly, the predominant emotion in all portions of the book is positive. Santiago always carries with him an unwavering trust in his personal destiny. In Part Two, we see more negative emotions and fear due to some of the challenges along the journey. Finally, in the epilogue, we see lots of anticipation as Santiago’s journey draws to a conclusion.\r\nCitation:\r\nNRC emotion lexicon. Saif Mohammad and Peter Turney: http://saifmohammad.com/WebPages/NRC-Emotion-Lexicon.htm\r\n\r\n\r\n\r\n",
    "preview": "posts/project-03/a3_task3_abowd_laurel_files/figure-html5/unnamed-chunk-6-1.png",
    "last_modified": "2021-03-14T13:11:23-07:00",
    "input_file": "a3_task3_abowd_laurel.utf8.md"
  },
  {
    "path": "posts/project-02/",
    "title": "Palmetto binary logistic regression",
    "description": "Using binary logistic regression to predict palmetto species type.",
    "author": [
      {
        "name": "Laurel Abowd",
        "url": {}
      }
    ],
    "date": "2021-03-12",
    "categories": [],
    "contents": "\r\nIntroduction\r\nThis analysis uses data on two types of Florida palmetto trees to build a species prediction model using binary logistic regression. The model uses palmetto height, canopy length, canopy width, and number of green leaves as predictors for species. The two species of palmettos in this analysis are Serenoa repens and Sabal etonia.\r\nRead in data\r\n\r\n\r\nhide\r\n\r\n# Read in the data as all columns as characters and convert back to numeric and factor as needed\r\n\r\npalmetto <- read_csv(here('data/project-02/palmetto.csv'),\r\n                     col_types = cols(.default = 'c')) %>% \r\n  mutate(height = as.numeric(height), \r\n         length = as.numeric(length),\r\n         width = as.numeric(width),\r\n         green_lvs = as.numeric(green_lvs), \r\n         species = as.factor(species))\r\n\r\n\r\n\r\nData visualization\r\n\r\n\r\nhide\r\n\r\n# Data visualizations to explore differences in height, canopy length, canopy length, canopy width, and green leaves for each of the two species. \r\n# (1 = Serenoa repens 2 = Sabal etonia)\r\n\r\n# Height and green leaves for two species\r\nggplot(data = palmetto, aes(x = green_lvs, y = height)) +\r\n  geom_point(aes(color = species), alpha = 0.5) +\r\n  scale_color_manual(values = c(\"darkslategray4\", \"violetred3\"), \r\n                     labels = c(\"Serenoa repens\", \"Sabal etonia\")) +\r\n  theme(text = element_text(size = 20)) +\r\n  labs(x = \"Count of Green Leaves on Tree\",\r\n       y = \"Maximum Tree Height (cm)\",\r\n       title = \"Palmetto Maximum Tree Height (cm) vs. Green Leaf Count\") +\r\n  theme_minimal()\r\n\r\n\r\n\r\n\r\nFigure 1. Maximum tree height (cm) vs. the count of green leaves on tree for Seronoa repens (blue) and Sabal etonia (magenta), two dominant palmetto species in south-central Florida from 1981-2017. Data source: Abrahamson, W.G. (2019)\r\nWhile Serenoa repens and Sabal etonia have similar maximum tree heights (cm), Sabal etonia clearly has fewer counts of green leaves than Serenoa repens.\r\n\r\n\r\nhide\r\n\r\n# Canopy height and length for the two species\r\nggplot(data = palmetto, aes(x = width, y = length)) +\r\n  geom_point(aes(color = species), alpha = 0.5) +\r\n  scale_color_manual(values = c(\"darkslategray4\", \"violetred3\"),\r\n                     labels = c(\"Serenoa repens\", \"Sabal etonia\")) +\r\n  labs(x = \"Widest Canopy Width (cm)\",\r\n       y = \"Widest Canopy Length (cm)\",\r\n       title = \"Palmetto Widest Canopy Width (cm) vs. Widest Canopy Length (cm)\") +\r\n  theme_minimal()\r\n\r\n\r\n\r\n\r\nFigure 2. Widest canopy length (cm) vs. widest canopy width (cm) perpendicular to canopy length for Seronoa repens (blue) and Sabal etonia (magenta), two dominant palmetto species in south-central Florida from 1981-2017. Data source: Abrahamson, W.G. (2019)\r\nWhile Serenoa repens and Sabal etonia have similar maximum canopy width (cm), Sabal etonia appears to have wider canopy length than Serenoa repens.\r\nBinary logistic regression\r\n\r\n\r\nhide\r\n\r\n# Binary logistic regression w/ predictor variables of height, length, width, and green leaves\r\n# levels (0 = \"1\" (Serenoa repens) 1 = \"2\" (Sabal etonia))\r\n\r\npalmetto_blr <- glm(species~ height + length + width + green_lvs,\r\n                            data = palmetto,\r\n                            family = \"binomial\" )\r\n\r\n\r\n\r\nTable 1. Binary logistic regression results for Serenoa repens (‘0’ factor level) and Sabal etonia (‘1’ factor level) palmetto trees from 1981-2017. Data source: Abrahamson, W.G. (2019)\r\n\r\n\r\nhide\r\n\r\n# Tidy version\r\nblr_tidy <- tidy(palmetto_blr)\r\n\r\n# Finalize table\r\nblr_tidy %>% \r\n  kable(col.names = c(\"Variable\", \"Coefficient\", \"Standard Error\", \"Z Statistic\", \"P Value\")) %>% \r\n  kable_styling(bootstrap_options = \"striped\", full_width = FALSE)\r\n\r\n\r\n\r\nVariable\r\n\r\n\r\nCoefficient\r\n\r\n\r\nStandard Error\r\n\r\n\r\nZ Statistic\r\n\r\n\r\nP Value\r\n\r\n\r\n(Intercept)\r\n\r\n\r\n3.2266851\r\n\r\n\r\n0.1420708\r\n\r\n\r\n22.71180\r\n\r\n\r\n0\r\n\r\n\r\nheight\r\n\r\n\r\n-0.0292173\r\n\r\n\r\n0.0023061\r\n\r\n\r\n-12.66984\r\n\r\n\r\n0\r\n\r\n\r\nlength\r\n\r\n\r\n0.0458233\r\n\r\n\r\n0.0018661\r\n\r\n\r\n24.55600\r\n\r\n\r\n0\r\n\r\n\r\nwidth\r\n\r\n\r\n0.0394434\r\n\r\n\r\n0.0021000\r\n\r\n\r\n18.78227\r\n\r\n\r\n0\r\n\r\n\r\ngreen_lvs\r\n\r\n\r\n-1.9084747\r\n\r\n\r\n0.0388634\r\n\r\n\r\n-49.10728\r\n\r\n\r\n0\r\n\r\n\r\nModel classification\r\n\r\n\r\nhide\r\n\r\n# Percentage of time palmettos would be classified as Sabal etonia based on blr model\r\nblr_fitted <- palmetto_blr %>% \r\n  broom::augment(type.predict = \"response\")\r\n\r\n# Wrangle blr_fitted so that there is a new column with the predicted palmetto species using a 50% accuracy cutoff. Then create a table showing how many trees were predicted correctly for each species\r\n\r\nblr_predict <- blr_fitted %>% \r\n  filter(.fitted != \"NA\") %>% \r\n  mutate(species_prediction = case_when(\r\n    .fitted < .5 ~ \"1\", \r\n    .fitted >= .5 ~ \"2\"\r\n  ))\r\n\r\n# Create table\r\npredict_counts <- blr_predict %>%\r\n  mutate(prediction = case_when(\r\n    species == species_prediction ~ \"correct\",\r\n    species != species_prediction ~ \"incorrect\"\r\n  )) %>% \r\n    select(c(\"species\", \"species_prediction\", \"prediction\")) %>% \r\n  group_by(species, prediction) %>% \r\n  summarize(n = n()) %>% \r\n  mutate(species = case_when(\r\n    species == \"1\" ~ \"Serenoa repens\",\r\n    species == \"2\" ~ \"Sabal etonia\"\r\n  )) %>% \r\n  pivot_wider(names_from = \"prediction\", values_from = \"n\") %>% \r\n  mutate(correctly_predicted = round(((correct)/(correct + incorrect)),digits = 3))\r\n\r\n\r\n\r\nTable 2. Number of times the binomial linear regression model correctly predicts palmetto species of either Serenoa repens or Sabal etonia based on predictor variables of height, canopy length, canopy width, and number of green leaves. Data source: Abrahamson, W.G. (2019)\r\n\r\n\r\nhide\r\n\r\n# Finalize table\r\npredict_counts %>% \r\n  kable(col.names = c(\"Species\", \r\n                      \"Correctly Classified\", \r\n                      \"Incorrectly Classified\", \r\n                      \"% Correctly Classified\")) %>% \r\n  kable_styling(bootstrap_options = \"striped\", full_width = FALSE, position = \"center\")\r\n\r\n\r\n\r\nSpecies\r\n\r\n\r\nCorrectly Classified\r\n\r\n\r\nIncorrectly Classified\r\n\r\n\r\n% Correctly Classified\r\n\r\n\r\nSerenoa repens\r\n\r\n\r\n5548\r\n\r\n\r\n564\r\n\r\n\r\n0.908\r\n\r\n\r\nSabal etonia\r\n\r\n\r\n5701\r\n\r\n\r\n454\r\n\r\n\r\n0.926\r\n\r\n\r\nSummary\r\nThe binary logistic regression model performed very well. Using the test data, the model correctly predicted 90.8% of the Serenoa repens palmettos and 92.3% of the Sabal etonia palmettos.\r\nCitation\r\nAbrahamson, W.G. 2019. Survival, growth and biomass estimates of two dominant palmetto species of south-central Florida from 1981 - 2017, ongoing at 5-year intervals ver 1. Environmental Data Initiative. https://doi.org/10.6073/pasta/f2f96ec76fbbd4b9db431c79a770c4d5\r\n\r\n\r\n\r\n",
    "preview": "posts/project-02/laurel_abowd_sample_code_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2021-03-13T20:25:27-08:00",
    "input_file": {}
  },
  {
    "path": "posts/project-01/",
    "title": "Cetacean Species Richness in California Bight",
    "description": "Raster analysis",
    "author": [
      {
        "name": "Laurel Abowd",
        "url": {}
      }
    ],
    "date": "2021-02-25",
    "categories": [],
    "contents": "\r\nRaster Analysis\r\n\r\n\r\nhide\r\n\r\n# Create function to convert cetacean species of 0 or 1 using a threshold of 0.6 for prescence \r\n\r\nspecies_present <- function(x, thresh = .6) {\r\n y <- ifelse(x >= thresh, 1, 0)\r\n  return(y)\r\n}\r\n\r\n# Read in  the data\r\ncetaceans <- here(\"data\", \"project-01\", \"ca_cetaceans\")\r\n\r\ncetaceans_files <- dir(cetaceans, full.names = TRUE, pattern = \"*.tif\")\r\n\r\ncetaceans_data <- stack(cetaceans_files) \r\n\r\n# Use function to convert to 0 or 1\r\n\r\ncetaceans_present <- calc(cetaceans_data, fun = species_present)\r\n\r\n# Find summation of species present by adding up the layers\r\n\r\ncetaceans_sum <- calc(cetaceans_present, fun = sum, na.rm = TRUE)\r\n\r\n\r\n\r\nFinalize Map\r\n\r\n\r\nhide\r\n\r\n# Create finalized map with ggplot\r\n\r\n# Convert to data frame\r\ncetaceans_df <- raster::rasterToPoints(cetaceans_sum) %>%\r\n  as.data.frame()\r\n\r\n# Get world data\r\nworld <- ne_countries(scale = \"medium\", returnclass = \"sf\")\r\n\r\n# Map with ggplot\r\n\r\nggplot() +\r\n  geom_raster(data = cetaceans_df, aes(x = x, y = y, fill = layer)) +\r\n  scale_fill_ghibli_c(\"MononokeMedium\", direction = +1) +\r\n  geom_sf(data = world) +\r\n  coord_sf(xlim = c(-125, -115), ylim = c(32, 38)) +\r\n  theme_minimal() +\r\n  labs(fill = \"Cetacean species\\npresent\", \r\n       x = \"longitude\",\r\n       y = \"latitude\",\r\n       title = \"Cetacean Species Richness in the California Bight\")\r\n\r\n\r\n\r\n\r\nFigure 1. Cetacean species richness raster map of the California bight. Color indicates number of species present. A threshold of 0.6 was used to determine the presence or absent of the species. If a species had a greater than 0.6 probability of being presence in that area, it was considered to be present. Data: Kaschner et al. (2016)\r\nData Citation:\r\nKaschner, K., Rius-Barile, J., Kesner-Reyes, K., Garilao, C., Kullander, S., Rees, T., & Froese, R. (2016). AquaMaps: Predicted range maps for aquatic species. www.aquamaps.org\r\nColor Palette:\r\nEwen Henderson (2020). ghibli: Studio Ghibli Colour Palettes. R package version 0.3.2. https://CRAN.R-project.org/package=ghibli\r\n\r\n\r\n\r\n",
    "preview": "posts/project-01/la_a3_part1_files/figure-html5/unnamed-chunk-2-1.png",
    "last_modified": "2021-03-13T20:57:27-08:00",
    "input_file": "la_a3_part1.utf8.md"
  },
  {
    "path": "posts/2021-02-09-welcome/",
    "title": "welcome",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Unknown",
        "url": {}
      }
    ],
    "date": "2021-02-09",
    "categories": [],
    "contents": "\r\nDistill is a publication format for scientific and technical writing, native to the web.\r\nLearn more about using Distill at https://rstudio.github.io/distill.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-02-25T13:33:39-08:00",
    "input_file": {}
  }
]
